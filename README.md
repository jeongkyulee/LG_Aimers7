# LG_Aimers7

[배경] 
리조트 내 식음업장은 계절, 요일, 투숙객 수, 행사 일정 등 다양한 요인에 따라 수요가 크게 변동하는 환경에 놓여 있습니다. 특히 휴양지 리조트는 단기간에 집중되는 고객 수요와 예측하기 어려운 방문 패턴으로 인해, 메뉴별 식자재 준비, 인력 배치, 재고 관리에 있어 높은 운영 난이도를 가집니다.

이러한 복잡한 운영 환경 속에서 정확한 메뉴 수요 예측은 비용 절감과 고객 만족도 향상에 있어 핵심적인 요소로 작용합니다. 최근에는 AI 기술을 활용한 수요 예측이 식음 서비스 운영의 새로운 해법으로 주목받고 있으며, 정형화된 과거 매출 데이터와 외부 요인을 함께 분석하는 방식이 빠르게 확산되고 있습니다.

이번 해커톤은 리조트 내 식음업장에서의 실전 수요 예측 문제를 AI로 해결해보는 것을 목표로 합니다. Aimers 여러분들은 실제 식음업장에서 수집된 판매 데이터를 기반으로, 각 메뉴가 1주일 동안 얼마나 판매될지를 예측하는 모델을 개발하게 됩니다. 이를 통해 데이터 기반 의사결정이 리조트 운영에 어떤 가치를 더할 수 있는지를 직접 체감할 수 있을 것입니다.



[주제]
리조트 내 식음업장 메뉴별 1주일 수요 예측 AI 모델 개발

**1. 리더 보드**

- **평가 산식** : 식음업장 별 가중치가 있는 SMAPE
<img width="1476" height="918" alt="image-2" src="https://github.com/user-attachments/assets/8a745b21-8bff-4ce9-82b5-aabc3a896c7d" />



🔹각 식음업장 별 가중치가 존재하며, **'담하'와 '미라시아'는 다른 업장보다 높은 가중치로 반영**됩니다. (단, 업장 별 가중치 값은 공개하지 않습니다.)

🔹실제 매출 수량이 **0인 경우에는 평가 산식 계산에 반영되지 않습니다**.

- Public score : 전체 테스트 데이터 샘플 중 사전 샘플링된 50%
- Private score : 전체 테스트 데이터 샘플 100%

전체 코드 구조

데이터 전처리

날짜 분해(요일, 월, 주말, 연중일, 계절 등)
공휴일 플래그 + 전/후 공휴일 플래그
성수기 플래그(여름: 느티나무 BBQ, 겨울: 포레스트릿·주막·카페)
음수 매출은 0으로 보정
피처 엔지니어링
Lag: 1, 2, 7, 14, 28일
Rolling 평균/표준편차, EWMA
스파이크 감지(spike_prev), 연속 0 구간(run_zero)
업장 총매출 + 점유율
앵커 메뉴(대표 메뉴) 관련 판매량·평균
최근 활동성(recent_activity, active_ratio)
오픈/휴점 패턴(is_open_7d, open_ratio_7d, last_open_gap)
학습/검증 분리
최근 60일은 검증(valid), 나머지는 학습(train)
Horizon Direct 방식 → 7일치 step별 타깃 생성

모델 학습

LightGBM + XGBoost 각각 학습 (log1p 변환 후)
sMAPE 기반 Softmax로 두 모델 앙상블
상관관계 업장 전용 모델
업장을 그룹으로 묶어 전용 모델 추가 학습
예: (주막+카페), (카페테리아+포레스트릿)
전용 모델 내부도 LGB+XGB 앙상블
공용 vs 전용 성능 비교 → Softmax로 최종 블렌딩

테스트 예측

TEST 데이터 최근 28일로 피처 생성
step=1 → 예측값을 lag에 반영 → step=2 … step=7까지 순차 예측
예측 결과는 정수 반올림 + 음수면 0 처리

보정 단계

업장별 예측 평균 vs 학습 평균 비교
스케일링으로 보정 (0.7~1.3 범위로 제한)

출력

영업일자 × 메뉴명 피벗 테이블
최종 CSV 제출 파일 생성
